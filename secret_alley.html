<!DOCTYPE html>
<html lang="en">

<head>
  <title>DODS-Secret Alley</title>
  <link rel="icon" type="image/png" href="images/fav.png">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
  <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Freeman&family=Rowdies:wght@300;400;700&display=swap"
    rel="stylesheet">
  <link
    href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto:wght@400;700&family=Poppins:wght@400;700&family=Lora:wght@400;700&family=Playfair+Display:wght@400;700&family=Raleway:wght@400;700&family=Open+Sans:wght@400;700&family=Quicksand:wght@400;700&family=Merriweather:wght@400;700&family=Nunito:wght@400;700&display=swap"
    rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400&display=swap">
  <script src="script.js" defer></script>
    <style>
/* Timeless Memories Theme */
:root {
  --primary-bg: linear-gradient(135deg, #fdfcfb, #e2d1c3);
    --form-bg: rgba(255, 255, 255, 0.9);
    --text-color: #4a3f35;
    --highlight-color: #a67c52;
    --border-color: #d4c2b0;
    --shadow-color: rgba(0, 0, 0, 0.1);
}

body.dark {
  --primary-bg: linear-gradient(135deg, #2b2b2b, #1e1e1e);
    --form-bg: rgba(40, 40, 40, 0.95);
    --text-color:#e0d5c0;
    --highlight-color:  #d4a373;
    --border-color:  #6b5f4a;
    --shadow-color: rgba(0, 0, 0, 0.3);
}






/* Memory Form */
#memory-form {
    background: var(--form-bg);
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 5px 15px var(--shadow-color);
    max-width: 500px;
    margin: 20px auto;
    border: 1px solid var(--border-color);
    transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
}

#memory-form:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px var(--shadow-color);
}

/* Form Inputs */
input, textarea {
    width: 100%;
    padding: 12px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    font-size: 16px;
    background: #f7f3ee;
    color: var(--text-color);
    font-family: 'Merriweather', serif;
    transition: 0.3s ease-in-out;
}

input:focus, textarea:focus {
    border-color: var(--highlight-color);
    box-shadow: 0 0 10px rgba(166, 124, 82, 0.3);
    outline: none;
}

/* Soft Button Design */
button {
    width: 100%;
    padding: 12px;
    border: none;
    border-radius: 8px;
    background: var(--highlight-color);
    color: white;
    font-size: 18px;
    font-family: 'Playfair Display', serif;
    font-weight: bold;
    cursor: pointer;
    transition: 0.3s ease-in-out;
}

.container {
      width: 80%;
      max-width: 500px;
      margin: 50px auto;
      padding: 20px;
      background-color: var(--box);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      border-radius: 8px;
    }

    .containerr {
      width: 80%;
      max-width: 500px;
      margin: 50px auto;
      padding: 20px;
      background-color: var(--box);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      border-radius: 8px;
    }

button:hover {
    background: #8d6748;
    transform: translateY(-2px);
}

/* Memories Container */
#memories-container {
    margin-top: 20px;
}

.memory-card {
    background: var(--form-bg);
    color: var(--text-color);
    padding: 15px;
    border-radius: 10px;
    margin: 15px auto;
    max-width: 500px;
    box-shadow: 0 3px 10px var(--shadow-color);
    border: 1px solid var(--border-color);
    font-family: 'Merriweather', serif;
    transition: transform 0.3s ease-in-out;
}

.memory-card:hover {
    transform: scale(1.02);
    box-shadow: 0 5px 15px var(--shadow-color);
}

/* Subtle Fade-In Effect */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.memory-card {
    animation: fadeIn 0.5s ease-in-out;
}

    </style>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
</head>
<body>
      <!-- Top Blue Bar -->
      <div id="top-bar-placeholder"></div>

      <script>
        fetch('topbar.html')
          .then(response => response.text())
          .then(data => {
            document.getElementById('top-bar-placeholder').innerHTML = data;
          })
          .catch(error => console.error('Error loading top bar:', error));
      </script>
      
          <!-- Header Section -->
          <header>
            <div class="logo">
              <a href="index.html"><img src="images/DODS.png" style="height: auto;width: 200px;" alt="College Logo"></a>
            </div>
            <!-- Hamburger Menu -->
            <div class="hamburger" onclick="toggleMenu()">
              <i class="fas fa-bars"></i>
            </div>
            <!-- Navigation -->
            <nav>
              <ul id="nav-menu">
                <li><a href="index.html">Home</a></li>
                <li class="dropdown">
                  <a href="#" onclick="toggleDropdown(event)">About <span>▼</span></a>
                  <ul class="dropdown-menu">
                    <li><a href="About.html">Department</a></li>
                    <li><a href="index.html#Facilities">Facilities</a></li>
                  </ul>
                </li>
                <li class="dropdown">
                  <a href="#" onclick="toggleDropdown(event)">Academics <span>▼</span></a>
                  <ul class="dropdown-menu">
                    <li><a href="courses.html">Courses</a></li>
                    <li><a href="syllabus.html">Syllabus</a></li>
                  </ul>
                </li>
                <li><a href="research.html">Research</a></li>
                <li><a href="events.html">Events</a></li>
                <li><a href="apps.html">Apps</a></li>
                <li><a href="Files.html">Files</a></li>
                <li><a href="news.html">News</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="Achivements.html">Achievements</a></li>
      
                <li>
                  <div class="darkLight-searchBox" style="font-size:25px;  ">
                    <div class="dark-light" style="margin-right: 30px;">
                      <p><i class="fa-solid fa-brush"></i></p>
                    </div>
                  </div>
                </li>
                <li>
                  <div class="darkLight-searchBox" style="font-size:25px;  ">
                    <div class="dark-light" style="margin-right: 25px;">
                      <p>
                        <a href="login.html"><i class="fa-solid fa-user"></i></a>
                      </p>
                    </div>
                  </div>
                </li>
              </ul>
      
            </nav>
          </header><br>
    <div class="container">
    <h2>Kindly Login with TY Roll_no</h2>
    <p>Secret Alley is to share memories when you exit the academy</p>
    <label for="userID">User ID:</label>
    <input type="text" id="userID" required>

    <label for="passcode">Passcode:</label>
    <input type="password" id="passcode" required>

    <button onclick="authorizeUser()">Login</button>
  </div>
        

        <div id="memory-form" style="display: none;" class="containerr">
            <h1>Department Memories</h1>
            <p>Seniors sharing their experiences with juniors.</p>
            <h2>Share Your Memory</h2>
            <input type="text" id="seniorName" placeholder="Your Name">
            <textarea id="memoryText" placeholder="Your Memory" rows="5"></textarea>
            <button onclick="addMemory()">Submit Memory</button>
        </div>


    <div class="containerr">
        <h2>Old Memories</h2>
        <div id="memories-container"></div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAxCEdZzF954zN0rgqtjnJ3aThUHRXJqz0",
            authDomain: "dodslab-fdb69.firebaseapp.com",
            projectId: "dodslab-fdb69",
            storageBucket: "dodslab-fdb69.appspot.com",
            messagingSenderId: "942582634754",
            appId: "1:942582634754:web:bde9e3741586357f5aca1b",
            measurementId: "G-0DCKYNDH5M"
        };

        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const memoriesCollection = db.collection('memories');

        async function addMemory() {
            const seniorName = document.getElementById('seniorName').value;
            const memoryText = document.getElementById('memoryText').value;

            if (seniorName && memoryText) {
                try {
                    await memoriesCollection.add({
                        name: seniorName,
                        memory: memoryText,
                        timestamp: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    document.getElementById('seniorName').value = '';
                    document.getElementById('memoryText').value = '';
                    loadMemories();
                } catch (error) {
                    console.error("Error adding document: ", error);
                    alert("Error submitting memory. Please try again.");
                }
            } else {
                alert("Please fill in both your name and memory.");
            }
        }

        async function loadMemories() {
            const memoriesContainer = document.getElementById('memories-container');
            memoriesContainer.innerHTML = '';

            try {
                const querySnapshot = await memoriesCollection.orderBy('timestamp', 'desc').get();
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    const memoryCard = document.createElement('div');
                    memoryCard.className = 'memory-card';
                    memoryCard.innerHTML = `
                        <h3>A Memory from ${data.name}</h3>
                        <p>${data.memory}</p>
                        <p class="senior-info">- ${data.name}</p>
                    `;
                    memoriesContainer.appendChild(memoryCard);
                });
            } catch (error) {
                console.error("Error getting documents: ", error);
                alert("Error loading memories. Please try again.");
            }
        }

        loadMemories();

        // Flag to track login status
    let isAuthorized = false;

// Predefined credentials
const validCredentials = {
  user1: "pass123",
  admin: "adminPass"
};

function authorizeUser() {
  const userID = document.getElementById("userID").value;
  const passcode = document.getElementById("passcode").value;

  if (validCredentials[userID] && validCredentials[userID] === passcode) {
    alert("Login successful!");
    isAuthorized = true;  // Set authorization flag

    // Show attendance section
    document.getElementById("memory-form").style.display = "block";

    // Hide login section
    document.querySelector(".container").style.display = "none";
  } else {
    alert("Invalid ID or passcode!");
  }
}
    </script>
</body>
<div id="footer"></div>
<script>
  fetch("footer.html")
    .then(response => response.text())
    .then(data => {
      document.getElementById("footer").innerHTML = data;
    });
</script>
</html>