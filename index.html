<!DOCTYPE html>
<html>
<head>
  <title>RM Topic Submission</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f0f0;
      padding: 20px;
    }
    .form-box {
      background: white;
      padding: 25px;
      max-width: 500px;
      margin: auto;
      border-radius: 15px;
      box-shadow: 0 0 12px rgba(0,0,0,0.1);
    }
    input, textarea, button, select {
      width: 95%;
      padding: 10px;
      margin: 8px 0;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 14px;
    }
    label {
      font-weight: bold;
    }
    .radio-group {
      display: flex;
      gap: 10px;
      margin: 6px 0;
    }
    .message {
      text-align: center;
      font-weight: bold;
      margin-top: 10px;
    }
    .success { color: green; }
    .error { color: red; }
  </style>
</head>
<body>
  <div class="form-box" id="formBox">
    <h2>Register Your Research Topic</h2>
    
    <label>Roll Number:</label>
    <input type="text" id="roll_no" placeholder="Enter Roll Number">

    <label>Name:</label>
    <input type="text" id="name" placeholder="Enter Name">

    <label>Project Topic:</label>
    <input type="text" id="topic" placeholder="Enter Project Topic">

    <label>Software (if any):</label>
    <input type="text" id="software" placeholder="E.g., Python, MATLAB">

    <label>Hardware (if any):</label>
    <input type="text" id="hardware" placeholder="E.g., Arduino, Raspberry Pi">

    <label>Tools/Resources:</label>
    <input type="text" id="tools" placeholder="E.g., Google Colab, TensorFlow">

    <label>Use Cases / Purpose:</label>
    <textarea id="usecases" rows="3" placeholder="Describe the expected output or purpose"></textarea>



    <button onclick="submitTopic()">Submit</button>
    <div id="message" class="message"></div>
  </div>

  <script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbwz0ANcU7pLq3v82NizWbp8LG0LZdaTju-xWapA0Qb8YLSfWEbaKDJYJSqXn6ZTCdiUCQ/exec'; // Replace with YOUR actual deployed script URL
    const deadline = new Date("2025-08-05T23:59:59"); // Set your deadline here

    function submitTopic() {
      const now = new Date();
      if (now > deadline) {
        document.getElementById("message").textContent = "The submission deadline has passed.";
        document.getElementById("message").className = "message error";
        return;
      }

      const roll_no = document.getElementById('roll_no').value.trim().toUpperCase();
      const name = document.getElementById('name').value.trim().toUpperCase();
      const topic = document.getElementById('topic').value.trim();
      const software = document.getElementById('software').value.trim();
      const hardware = document.getElementById('hardware').value.trim();
      const tools = document.getElementById('tools').value.trim();
      const usecases = document.getElementById('usecases').value.trim();

      const msgDiv = document.getElementById("message");

      // Validation
      if (!roll_no || !name || !topic || !software || !hardware || !tools || !usecases) {
        msgDiv.textContent = "All fields are required.";
        msgDiv.className = "message error";
        return;
      }

      const nameRegex = /^[A-Z\s]+$/;
      if (!nameRegex.test(name)) {
        msgDiv.textContent = "Name must contain only letters and spaces.";
        msgDiv.className = "message error";
        return;
      }

      const data = {
        roll: roll_no,
        name: name,
        topic: topic,
        software: software,
        hardware: hardware,
        tools: tools,
        usecases: usecases
      };

      fetch(scriptURL, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
      })
      .then(response => response.json())
      .then(res => {
        if (res.status === "success") {
          msgDiv.textContent = res.message;
          msgDiv.className = "message success";
        } else {
          msgDiv.textContent = res.message;
          msgDiv.className = "message error";
        }
      })
      .catch(error => {
        msgDiv.textContent = "Error: " + error.message;
        msgDiv.className = "message error";
      });
    }
  </script>
</body>
</html>
