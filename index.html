<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Student Skills & Experience Form</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        /* Modern Professional UI ‚Äì Clean, Neutral, with Subtle Brand Accent */
        :root {
            --primary: #6f4ed6;
            /* Refined violet-blue (brand accent) */
            --primary-hover: #5c3fc1;
            --accent: #aa00d4;
            /* Teal highlight for focus states */
            --bg: #f8f9fc;
            /* Cool, clean background */
            --card-bg: #ffffff;
            --text: #2e2e2e;
            --muted: #6b6b6b;
            --border: #e2e5ec;
            --radius: 10px;
            --shadow: 0 6px 20px rgba(0, 0, 0, 0.05);
            --transition: all 0.25s ease;
        }

        /* --- Base Reset --- */
        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Poppins', sans-serif;
            background: var(--bg);
            margin: 0;
            padding: 50px 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            color: var(--text);
        }

        /* --- Card Layout --- */
        .card {
            width: 100%;
            max-width: 850px;
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 48px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            transition: var(--transition);
        }

        .card:hover {
            box-shadow: 0 8px 28px rgba(111, 78, 214, 0.08);
        }

        /* --- Headings --- */
        h2 {
            margin: 0 0 8px;
            font-weight: 700;
            color: var(--primary);
            font-size: 2rem;
            letter-spacing: -0.3px;
        }

        p.subtitle {
            color: var(--muted);
            margin: 0 0 35px;
            font-size: 1rem;
        }

        /* --- Grid Layout --- */
        .grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
        }

        .full {
            grid-column: 1 / -1;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text);
            font-size: 0.95rem;
        }

        /* --- Inputs --- */
        input[type="text"],
        input[type="email"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 14px;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            background: #fdfdfd;
            font-size: 1rem;
            color: var(--text);
            transition: var(--transition);
        }

        input:focus,
        select:focus,
        textarea:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(111, 78, 214, 0.15);
            background: #fff;
        }

        textarea {
            min-height: 120px;
            resize: vertical;
        }

        /* --- Buttons --- */
        button.primary {
            background: linear-gradient(45deg, var(--primary), var(--accent));
            color: #fff;
            border: none;
            padding: 15px 36px;
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            margin-top: 30px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 1.05rem;
            letter-spacing: 0.3px;
            transition: all 0.5s;
            box-shadow: 0 5px 18px rgba(111, 78, 214, 0.25);
        }

        button.secondary {
            background: linear-gradient(45deg, var(--border), var(--card-bg));
            color: var(--text);
            border: 1px solid rgb(196, 196, 196);
            padding: 15px 36px;
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            margin-top: 30px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 1.05rem;
            letter-spacing: 0.3px;
            transition: all 0.5s;
            box-shadow: 0 5px 18px rgba(179, 177, 184, 0.25);
        }

        button.primary:hover {
            background: linear-gradient(75deg, var(--primary), var(--accent));
            box-shadow: 0 8px 22px rgba(111, 78, 214, 0.3);
            transform: translateY(-2px);
        }

        button.primary:active {
            transform: scale(0.98);
        }

        /* --- Tag Styling --- */
        .tag-list {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .tag {
            background: #f2f4ff;
            color: var(--primary);
            padding: 7px 14px;
            border-radius: 999px;
            font-size: 0.85rem;
            font-weight: 500;
            border: 1px solid rgba(111, 78, 214, 0.15);
        }

        /* --- Messages --- */
        .message {
            margin-top: 25px;
            padding: 16px;
            border-radius: var(--radius);
            display: none;
            font-size: 1rem;
            font-weight: 500;
        }

        .message.show {
            display: block;
        }

        .success {
            background: #e6fff0;
            color: #155724;
            border: 1px solid #b7ebc1;
        }

        .error {
            background: #fff0f0;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .warning {
            background: #fffceb;
            color: #856404;
            border: 1px solid #ffeeba;
        }

        .small-note {
            font-size: 0.85rem;
            color: var(--muted);
            margin-top: 6px;
        }

        /* --- Responsive Design --- */
        @media (max-width: 768px) {
            body {
                padding: 25px;
            }

            .grid {
                grid-template-columns: 1fr;
                gap: 18px;
            }

            .card {
                padding: 30px;
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .loader {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid #ccc;
            border-top: 2px solid #007bff;
            /* Blue color for spin */
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            vertical-align: middle;
            margin-right: 6px;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .rules-box {
      border-radius: 16px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
      padding: 30px;
      width: auto;
      transition: 0.3s;
      border-left: 5px solid #007bff;
      border-right: 5px solid #007bff;
    }


    .rules-box h3 {
      margin-top: 0;
      color: #ff0055;
    }

    .rules-box ul {
      padding-left: 20px;
      color: #333;
      font-size: 0.95rem;
      line-height: 1.6;
    }

    </style>

</head>

<body>
    
      
    <div class="card">
        <h2 style="text-align: center;">OJT Placement Requirement Form</h2>
        <div class="rules-box">
            <h3>Rules & Instructions</h3>
            <ul>
              <li><span style="color: red;">*</span> Fields marked with * are mandatory.</li>
              <li>Ensure your <b>Roll Number</b> is entered correctly ‚Äî it‚Äôs used for updates or duplicate checks.</li>
              <li>Provide clear and specific details in your <b>Skills</b> and <b>Work Experience</b> sections.</li>
              <li>Select your <b>Proficiency Level</b> and <b>Domain</b> carefully ‚Äî this helps with project allocation.</li>
              <li>Once submitted, the same Roll No can only be updated before the deadline.</li>
              <li>The form will be automatically <b>disabled after the deadline</b>.</li>
              <li>Do not refresh or close the page until you see the <b>‚ÄúForm submitted successfully‚Äù</b> message.</li>
            </ul>
          </div><br>
        <div class="grid">
            <div>
                <label>Roll Number <span style="color:red">*</span></label>
                <input id="roll_no" type="text" placeholder="TDS2526000" onblur="tryFetch()" />
                <!-- <div class="small-note">Enter Roll No and leave the field to auto-load existing record (if any).</div> -->
            </div>

            <div>
                <label>Student Name <span style="color:red">*</span></label>
                <input id="name" type="text" placeholder="Full name" />
            </div>

            <div>
                <label>Email (optional)</label>
                <input id="email" type="email" placeholder="you@example.com" />
            </div>

            <div>
                <label>Primary Domain Interest <span style="color:red">*</span></label>
                <select id="domain">
                    <option value="">Select domain</option>
                    <option>AI</option>
                    <option>ML</option>
                    <option>Web Dev</option>
                    <option>Data Science</option>
                </select>
            </div>

            <div class="full">
                <label>Skills (comma-separated) <span style="color:red">*</span></label>
                <div class="small-note">Enter only the skills you currently have. Do not include skills you haven‚Äôt learned yet.</div>
                <input id="skills" type="text" placeholder="Python, React, SQL, OpenCV" oninput="analyzeSkills()" />
                <div id="skill-tags" class="tag-list" aria-hidden="true"></div>
                
            </div>

            <div>
                <label>Skill Proficiency <span style="color:red">*</span></label>
                <select id="proficiency">
                    <option value="">Select</option>
                    <option>Beginner</option>
                    <option>Intermediate</option>
                    <option>Advanced</option>
                </select>
            </div>

            <div>
                <label>Number of Projects Completed (optional)</label>
                <input id="projects" type="number" min="0" placeholder="0" />
            </div>

            <div class="full">
                <label>Certifications (optional)</label>
                <input id="certifications" type="text" placeholder="e.g., AWS Certified, Coursera ML" />
            </div>

            <div class="full">
                <label>Work Experience (if any) ‚Äî Company, Duration, Role (optional)</label>
                <textarea id="workexp" placeholder="Company - 2023 (6 months) - Intern, ..."></textarea>
            </div>

            <div>
                <label>Interested in Group Projects? <span style="color:red">*</span></label>
                <div class="row-inline">
                    <label><input type="radio" name="group" value="Yes" checked /> Yes</label>
                    <label><input type="radio" name="group" value="No" /> No</label>
                </div>
            </div>

            <div>
                <label>Preferred Project Type</label>
                <select id="ptype">
                    <option>Individual</option>
                    <option>Group</option>
                    <option>Either</option>
                </select>
            </div>

            <div>
                <label>Available Hours/week (optional)</label>
                <input id="hours" type="number" min="12" placeholder="Minimum 12Hrs per week" />
            </div>

            <div>
                <label>Portfolio / GitHub Link (optional)</label>
                <input id="portfolio" type="text" placeholder="https://github.com/yourusername" />
            </div>

            <div class="full">
                <label>Additional Notes (optional)</label>
                <textarea id="notes" placeholder="Anything else you want to mention..."></textarea>
            </div>
        </div>

        <div style="margin-top:14px;display:flex;gap:10px;flex-wrap:wrap">
            <button class="primary" id="submitBtn" onclick="submitForm()">
                <span id="spinner" class="loader" style="display:none;"></span>
                <span id="btnText">Submit / Update</span>
            </button>
            <button class="secondary" id="submitBtn" onclick="clearForm()">Clear</button>

            <div style="margin-left:auto;color:#666;font-size:0.9rem" id="deadlineInfo"></div>

        </div>
        <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap;">
            <button class="primary" id="submitBtn" 
                onclick="window.location.href='https://docs.google.com/spreadsheets/d/1ntFvUVFDcHCwXVB7qyUCZsRa1_3adE5bFF-_AEeCkFU/edit?usp=sharing'">
                <span id="btnText">View</span>
            </button>
        </div>
        

        <div id="message" class="message"></div>
    </div>

    <script>
        // === CONFIG ===
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzjxaBmlpak8T2nSFx-y4oPqRywqarQ79BmOURk-dLsjK0JMayLHWbkqXuF_xUwkYAvnQ/exec";

        const DEADLINE = new Date("2025-11-15T23:59:59");
        document.getElementById('deadlineInfo').textContent = `Deadline: ${DEADLINE.toLocaleString()}`;

        const SKILL_CATEGORIES = {
            "python": "Programming", "java": "Programming", "c++": "Programming", "react": "Frontend",
            "angular": "Frontend", "vue": "Frontend", "tensorflow": "ML", "pytorch": "ML", "opencv": "Vision",
            "sql": "Database", "aws": "Cloud", "docker": "DevOps", "arduino": "Embedded"
        };

        function showMessage(text, type = "success") {
            const el = document.getElementById('message');
            el.textContent = text;
            el.className = 'message show ' + (type === 'success' ? 'success' : (type === 'warning' ? 'warning' : 'error'));
        }

        function clearMessage() {
            const el = document.getElementById('message');
            el.textContent = "";
            el.className = 'message';
        }

        function checkDeadline() {
            const now = new Date();
            if (now > DEADLINE) {
                document.getElementById('submitBtn').disabled = true;
                document.getElementById('submitBtn').style.opacity = '0.6';
                showMessage("Form closed (deadline passed).", "warning");
                return true;
            }
            return false;
        }
        checkDeadline();

        function analyzeSkills() {
            const skills = document.getElementById('skills').value;
            const parts = skills.split(',').map(s => s.trim()).filter(Boolean);
            const tags = new Set();
            parts.forEach(s => {
                const key = s.toLowerCase();
                for (const k in SKILL_CATEGORIES) if (key.includes(k)) tags.add(SKILL_CATEGORIES[k]);
            });
            const container = document.getElementById('skill-tags');
            container.innerHTML = "";
            tags.forEach(t => {
                const d = document.createElement('div');
                d.className = 'tag'; d.textContent = t;
                container.appendChild(d);
            });
        }

        function clearForm() {
            document.querySelectorAll('input, select, textarea').forEach(el => {
                if (el.type === "radio") {
                    if (el.value === "Yes") el.checked = true;
                } else el.value = "";
            });
            analyzeSkills();
            clearMessage();
        }

        function validateAll(fields) {
            if (!fields.roll_no) return showMessage('Roll No required', 'error'), false;
            if (!fields.name) return showMessage('Name required', 'error'), false;
            if (!fields.skills) return showMessage('Enter skills', 'error'), false;
            if (!fields.proficiency) return showMessage('Select proficiency', 'error'), false;
            if (!fields.domain) return showMessage('Select domain', 'error'), false;
            if (fields.email && !/^\S+@\S+\.\S+$/.test(fields.email)) return showMessage('Invalid email', 'error'), false;
            if (checkDeadline()) return false;
            return true;
        }

        function submitForm() {
            clearMessage();
            const spinner = document.getElementById('spinner');
            const btnText = document.getElementById('btnText');
            const btn = document.getElementById('submitBtn');
            spinner.style.display = 'inline';
            btnText.textContent = 'Submitting...';
            btn.disabled = true;

            const payload = {
                roll_no: document.getElementById('roll_no').value.trim().toUpperCase(),
                name: document.getElementById('name').value.trim(),
                email: document.getElementById('email').value.trim(),
                skills: document.getElementById('skills').value.trim(),
                proficiency: document.getElementById('proficiency').value,
                domain: document.getElementById('domain').value,
                projects: document.getElementById('projects').value,
                certifications: document.getElementById('certifications').value.trim(),
                workexp: document.getElementById('workexp').value.trim(),
                grouppref: document.querySelector('input[name="group"]:checked').value,
                ptype: document.getElementById('ptype').value,
                hours: document.getElementById('hours').value,
                portfolio: document.getElementById('portfolio').value.trim(),
                notes: document.getElementById('notes').value.trim()
            };

            if (!validateAll(payload)) {
                spinner.style.display = 'none';
                btnText.textContent = 'Submit / Update';
                btn.disabled = false;
                return;
            }

            // üî∏ Post data (no-cors prevents reading response, but it will submit)
            fetch(SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                body: JSON.stringify(payload)
            })
                .then(() => {
                    spinner.style.display = 'none';
                    btnText.textContent = 'Submit / Update';
                    btn.disabled = false;

                    // ‚úÖ Show animated success message
                    const msg = document.getElementById('message');
                    msg.innerHTML = "<b>Success!</b> Your details were submitted or updated successfully.";
                    msg.className = "message show success";
                    msg.style.animation = "fadeIn 0.6s ease";

                    // Optional: auto-clear form after delay
                    setTimeout(() => {
                        clearForm();
                        msg.classList.remove("show");
                    }, 4000);
                })
                .catch(err => {
                    spinner.style.display = 'none';
                    btnText.textContent = 'Submit / Update';
                    btn.disabled = false;
                    showMessage('‚ö†Ô∏è Error submitting: ' + err.message, 'error');
                });
        }


        analyzeSkills();
    </script>

</body>

</html>
